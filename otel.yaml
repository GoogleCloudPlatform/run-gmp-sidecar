exporters:
  googlemanagedprometheus:
    metric:
      add_metric_suffixes: false
    user_agent: Google-Cloud-Run-GMP-Sidecar/latest; ShortName=run-gmp;ShortVersion=latest
processors:
  resourcedetection/run-gmp-self-metrics_2:
    detectors:
    - gcp
    - env
receivers:
  prometheus/run-gmp-self-metrics:
    config:
      scrape_configs:
      - job_name: run-gmp-sidecar-self-metrics
        metric_relabel_configs:
        - action: replace
          replacement: "20201"
          source_labels:
          - __address__
          target_label: instance
        scrape_interval: 1m
        static_configs:
        - targets:
          - 0.0.0.0:20201
service:
  pipelines:
    metrics/run-gmp-self-metrics:
      exporters:
      - googlemanagedprometheus
      processors:
      - resourcedetection/run-gmp-self-metrics_2
      receivers:
      - prometheus/run-gmp-self-metrics
  telemetry:
    metrics:
      address: 0.0.0.0:20201
